# v1.2.0 æ›´æ–°æŠ¥å‘Š

## ğŸ“‹ æ›´æ–°å†…å®¹

### âœ… ä¸‰å¤§æ”¹è¿›

#### 1. **ä¿®å¤æ³¨é‡Šä¸­çš„ key è¢«è¯†åˆ«ä¸ºä½¿ç”¨**

**é—®é¢˜**ï¼š

```vue
<!-- <button>{{ t('example.old') }}</button> -->
```

å³ä½¿ä»£ç è¢«æ³¨é‡Šï¼Œ`example.old` ä»ç„¶è¢«è¯†åˆ«ä¸º"æ­£åœ¨ä½¿ç”¨"ï¼Œå¯¼è‡´æ¸…ç†å·¥å…·æ— æ³•åˆ é™¤ã€‚

**ä¿®å¤**ï¼š

- åœ¨ `key-cleaner.ts` çš„ `scanUsedKeys()` æ–¹æ³•ä¸­æ·»åŠ  `removeComments()` å‡½æ•°
- æ”¯æŒç§»é™¤ï¼š
  - å•è¡Œæ³¨é‡Šï¼š`//`
  - å¤šè¡Œæ³¨é‡Šï¼š`/* */`
  - HTML/Vue æ³¨é‡Šï¼š`<!-- -->`
- æ™ºèƒ½å¤„ç†å­—ç¬¦ä¸²ä¸­çš„ `//`ï¼Œé¿å…è¯¯åˆ 

**ä»£ç å®ç°**ï¼š

```typescript
private removeComments(code: string): string {
  let result = code

  // ç§»é™¤å¤šè¡Œæ³¨é‡Š /* ... */
  result = result.replace(/\/\*[\s\S]*?\*\//g, '')

  // ç§»é™¤ HTML/Vue æ¨¡æ¿æ³¨é‡Š <!-- ... -->
  result = result.replace(/<!--[\s\S]*?-->/g, '')

  // ç§»é™¤å•è¡Œæ³¨é‡Š //ï¼ˆä¿ç•™å­—ç¬¦ä¸²ä¸­çš„ //ï¼‰
  // ... æ™ºèƒ½åˆ†è¡Œå¤„ç†é€»è¾‘

  return result
}
```

**æµ‹è¯•éªŒè¯**ï¼š

```vue
<!-- è¢«æ³¨é‡Šçš„ä»£ç  -->
<!-- <div>{{ t('should_be_removed') }}</div> -->

<!-- å­—ç¬¦ä¸²ä¸­çš„ // ä¸å—å½±å“ -->
const url = "https://example.com" // æ³¨é‡Š
```

---

#### 2. **ç»Ÿä¸€ UI ä¸º Cursor Directory é£æ ¼**

**Before (æ¸å˜è‰²é£æ ¼)**ï¼š

- ğŸ¨ ç´«è‰²æ¸å˜èƒŒæ™¯
- ğŸ¨ ç²‰çº¢è‰²æ¸å˜æŒ‰é’®
- ğŸ¨ å¤§é‡é˜´å½±å’Œåœ†è§’

**After (Cursor é£æ ¼)**ï¼š

- ğŸ–¤ æ·±è‰²ä¸»é¢˜ (`#1e1e1e` èƒŒæ™¯)
- âšª ç®€æ´è¾¹æ¡†å’Œåˆ†éš”çº¿
- ğŸ“ æ‰å¹³åŒ–è®¾è®¡ï¼Œæ— æ¸å˜

**ä¸»é¢æ¿æ”¹è¿›**ï¼š

```
Before: å¡ç‰‡å¼å¸ƒå±€ + æ¸å˜èƒŒæ™¯
After:  åˆ—è¡¨å¼å¸ƒå±€ + æ·±è‰²ä¸»é¢˜
```

**æ¸…ç†å·¥å…·æ”¹è¿›**ï¼š

```
Before: å½©è‰²æ¸å˜ header + ç™½è‰²èƒŒæ™¯
After:  æ·±è‰² header + æ·±è‰²è¡¨æ ¼
```

**è§†è§‰å¯¹æ¯”**ï¼š

| å…ƒç´    | Before                                      | After              |
| ------ | ------------------------------------------- | ------------------ |
| èƒŒæ™¯   | `linear-gradient(135deg, #667eea, #764ba2)` | `#1e1e1e`          |
| æŒ‰é’®   | æ¸å˜è‰²                                      | `#252526` çº¯è‰²     |
| æ–‡å­—   | `#374151`                                   | `#cccccc`          |
| è¾¹æ¡†   | `#e5e7eb`                                   | `#333`             |
| å¼ºè°ƒè‰² | å¤šç§æ¸å˜                                    | `#0e639c` ç»Ÿä¸€è“è‰² |

---

#### 3. **ç§»é™¤ç»Ÿè®¡é¢æ¿**

**ç§»é™¤å†…å®¹**ï¼š

- âŒ ä¸»é¢æ¿ä¸­çš„"ç»Ÿè®¡é¢æ¿"å¡ç‰‡ï¼ˆå·²æ ‡è®°"å¼€å‘ä¸­"ï¼‰
- âŒ æ–‡æ¡£ä¸­çš„ç»Ÿè®¡é¢æ¿ç›¸å…³è¯´æ˜

**åŸå› **ï¼š

- è¯¥åŠŸèƒ½åç»­ä¸å†éœ€è¦
- ç®€åŒ–å·¥å…·ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½
- å‡å°‘ç»´æŠ¤æˆæœ¬

**æ–‡æ¡£æ›´æ–°**ï¼š

```markdown
## ğŸ”® å³å°†æ”¯æŒ

- [x] æ¸…ç†æœªä½¿ç”¨çš„ keyï¼ˆå·²å®Œæˆï¼‰
- [ ] æ–°å¢è¯­ç§æ‰¹é‡ç”Ÿæˆ
- [ ] æ ¼å¼é€‚é…å™¨ï¼ˆæ”¯æŒ TS å¯¹è±¡æ ¼å¼ï¼‰
```

---

## ğŸ“Š ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶                       | å˜æ›´ç±»å‹ | è¯´æ˜                           |
| -------------------------- | -------- | ------------------------------ |
| `key-cleaner.ts`           | åŠŸèƒ½å¢å¼º | æ·»åŠ  `removeComments()` æ–¹æ³•   |
| `plugin/index.ts`          | UI ä¼˜åŒ–  | ä¸»é¢æ¿æ ·å¼æ›´æ–°ä¸º Cursor é£æ ¼   |
| `plugin/routes/cleanup.ts` | UI ä¼˜åŒ–  | æ¸…ç†é¡µé¢æ ·å¼æ›´æ–°ä¸º Cursor é£æ ¼ |
| `docs/i18n-tools.md`       | æ–‡æ¡£æ›´æ–° | æ›´æ–°ç‰ˆæœ¬æ—¥å¿—ï¼Œç§»é™¤ç»Ÿè®¡é¢æ¿è¯´æ˜ |
| `docs/UPDATE_V1.2.md`      | æ–‡æ¡£æ–°å¢ | æœ¬æ›´æ–°æŠ¥å‘Š                     |

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯• 1ï¼šæ³¨é‡Šè¿‡æ»¤

**æµ‹è¯•ä»£ç **ï¼š

```vue
<template>
  <!-- è¿™æ˜¯æ­£å¸¸ä½¿ç”¨çš„ -->
  <div>{{ t('active.key') }}</div>

  <!-- è¿™æ˜¯è¢«æ³¨é‡Šçš„ -->
  <!-- <div>{{ t('commented.key') }}</div> -->

  <!-- å¤šè¡Œæ³¨é‡Š
  <div>{{ t('multiline.comment') }}</div>
  -->
</template>

<script>
// å•è¡Œæ³¨é‡Šä¸­çš„key
// const text = t('single.line.comment')

/* å¤šè¡Œæ³¨é‡Šä¸­çš„key
const text2 = t('multiline.block.comment')
*/

// å­—ç¬¦ä¸²ä¸­çš„ // ä¸å—å½±å“
const url = 'https://example.com' // t('inline.comment')
</script>
```

**é¢„æœŸç»“æœ**ï¼š

- âœ… `active.key` è¢«è¯†åˆ«ä¸ºä½¿ç”¨ä¸­
- âœ… `commented.key` **ä¸**è¢«è¯†åˆ«ï¼ˆè¢«æ³¨é‡Šï¼‰
- âœ… `multiline.comment` **ä¸**è¢«è¯†åˆ«ï¼ˆè¢«æ³¨é‡Šï¼‰
- âœ… `single.line.comment` **ä¸**è¢«è¯†åˆ«ï¼ˆè¢«æ³¨é‡Šï¼‰
- âœ… `multiline.block.comment` **ä¸**è¢«è¯†åˆ«ï¼ˆè¢«æ³¨é‡Šï¼‰
- âœ… `inline.comment` **ä¸**è¢«è¯†åˆ«ï¼ˆåœ¨æ³¨é‡Šä¸­ï¼‰

**æ‰§è¡Œæ¸…ç†**ï¼š

```bash
npm run lang:clean --dry-run
```

---

### æµ‹è¯• 2ï¼šUI é£æ ¼

**è®¿é—®é¡µé¢**ï¼š

1. `http://localhost:5173/__i18n` - ä¸»é¢æ¿
2. `http://localhost:5173/__i18n/cleanup` - æ¸…ç†å·¥å…·

**è§†è§‰æ£€æŸ¥**ï¼š

- âœ… æ·±è‰²èƒŒæ™¯ï¼ˆ`#1e1e1e`ï¼‰
- âœ… æ— æ¸å˜è‰²
- âœ… ç®€æ´è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… ç»Ÿä¸€çš„è“è‰²å¼ºè°ƒï¼ˆ`#0e639c`ï¼‰
- âœ… è¡¨æ ¼è¡Œ hover æ•ˆæœæ­£å¸¸
- âœ… æŒ‰é’®äº¤äº’æ­£å¸¸

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæ¸…ç†æ³¨é‡Šçš„ key

**åœºæ™¯**ï¼šé‡æ„ä»£ç æ—¶æ³¨é‡Šäº†æ—§çš„ç¿»è¯‘è°ƒç”¨

```vue
<!-- æ—§çš„å®ç°ï¼ˆå·²åºŸå¼ƒï¼‰ -->
<!--
<div class="old-style">
  {{ t('old.implementation.title') }}
  {{ t('old.implementation.description') }}
</div>
-->

<!-- æ–°çš„å®ç° -->
<div class="new-style">
  {{ t('new.implementation.title') }}
</div>
```

**æ‰§è¡Œæ¸…ç†**ï¼š

```bash
npm run lang:clean
```

**ç»“æœ**ï¼š

- âœ… `old.implementation.title` è¢«è¯†åˆ«ä¸ºæœªä½¿ç”¨
- âœ… `old.implementation.description` è¢«è¯†åˆ«ä¸ºæœªä½¿ç”¨
- âœ… `new.implementation.title` ä¿ç•™ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰

---

### ç¤ºä¾‹ 2ï¼šä½¿ç”¨æ–° UI

**å¯åŠ¨å¼€å‘æœåŠ¡å™¨**ï¼š

```bash
npm run dev
```

**è®¿é—®å·¥å…·**ï¼š

```
http://localhost:5173/__i18n
```

**æ–° UI ä½“éªŒ**ï¼š

- ğŸ–¤ æ·±è‰²ä¸»é¢˜ï¼Œçœ¼ç›å‹å¥½
- ğŸ“‹ åˆ—è¡¨å¼å¸ƒå±€ï¼Œä¿¡æ¯å¯†åº¦æ›´é«˜
- ğŸ¯ ç®€æ´æ¸…æ™°ï¼Œä¸“æ³¨å†…å®¹
- âš¡ åŠ è½½å’Œäº¤äº’æ›´æµç•…

---

## ğŸ“š æŠ€æœ¯ç»†èŠ‚

### æ³¨é‡Šè¿‡æ»¤ç®—æ³•

**æ ¸å¿ƒæ€è·¯**ï¼š

1. å…ˆç§»é™¤å—æ³¨é‡Šï¼ˆ`/* */`ã€`<!-- -->`ï¼‰
2. å†æŒ‰è¡Œå¤„ç†å•è¡Œæ³¨é‡Šï¼ˆ`//`ï¼‰
3. å¤„ç†å•è¡Œæ³¨é‡Šæ—¶ï¼Œè·Ÿè¸ªå­—ç¬¦ä¸²çŠ¶æ€ï¼Œé¿å…è¯¯åˆ å­—ç¬¦ä¸²ä¸­çš„ `//`

**çŠ¶æ€æœºå®ç°**ï¼š

```typescript
let inString = false
let stringChar = ''

for (let i = 0; i < line.length - 1; i++) {
  const char = line[i]
  const nextChar = line[i + 1]

  // è¿›å…¥/é€€å‡ºå­—ç¬¦ä¸²çŠ¶æ€
  if ((char === '"' || char === "'" || char === '`') && line[i - 1] !== '\\') {
    if (!inString) {
      inString = true
      stringChar = char
    } else if (char === stringChar) {
      inString = false
    }
  }

  // æ£€æµ‹ // æ³¨é‡Šï¼ˆä»…åœ¨éå­—ç¬¦ä¸²çŠ¶æ€ï¼‰
  if (!inString && char === '/' && nextChar === '/') {
    commentStart = i
    break
  }
}
```

**è¾¹ç•Œæƒ…å†µå¤„ç†**ï¼š

- âœ… è½¬ä¹‰å­—ç¬¦ï¼š`"text with \" quote"`
- âœ… æ¨¡æ¿å­—ç¬¦ä¸²ï¼š`` `text with ${var}` ``
- âœ… æ­£åˆ™è¡¨è¾¾å¼ï¼š`/https:\/\//`ï¼ˆè™½ç„¶ä¸å®Œç¾ï¼Œä½†è¶³å¤Ÿæ—¥å¸¸ä½¿ç”¨ï¼‰

---

### Cursor é£æ ¼è‰²å½©ç³»ç»Ÿ

**ä¸»è‰²è°ƒ**ï¼š

```css
/* èƒŒæ™¯å±‚çº§ */
--bg-primary: #1e1e1e; /* ä¸»èƒŒæ™¯ */
--bg-secondary: #252526; /* æ¬¡çº§èƒŒæ™¯ï¼ˆå¡ç‰‡ï¼‰ */
--bg-hover: #2a2d2e; /* hover çŠ¶æ€ */

/* è¾¹æ¡†å’Œåˆ†éš” */
--border-color: #333;

/* æ–‡å­—å±‚çº§ */
--text-primary: #ffffff; /* æ ‡é¢˜ */
--text-secondary: #cccccc; /* æ­£æ–‡ */
--text-muted: #888; /* è¾…åŠ©æ–‡å­— */

/* å¼ºè°ƒè‰² */
--accent-blue: #0e639c; /* ä¸»è¦æ“ä½œ */
--accent-red: #c72e0e; /* å±é™©æ“ä½œ */
--accent-orange: #ce9178; /* ä»£ç é«˜äº® */
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ³¨é‡Šè¿‡æ»¤çš„å±€é™æ€§

**å¯èƒ½è¯¯åˆ¤çš„æƒ…å†µ**ï¼š

```javascript
// å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼
const regex = /\/\//g // è¿™ä¸ª // åœ¨æ­£åˆ™ä¸­ï¼Œä½†å¯èƒ½è¢«è¯¯åˆ¤
```

**å»ºè®®**ï¼š

- åœ¨æ¸…ç†å‰ä½¿ç”¨ `--dry-run` é¢„è§ˆ
- æ£€æŸ¥é¢„è§ˆç»“æœï¼Œç¡®è®¤æ— è¯¯åå†æ‰§è¡Œ
- ä¾èµ– Git è®°å½•ï¼Œä¸‡ä¸€è¯¯åˆ å¯ä»¥æ¢å¤

### 2. UI å…¼å®¹æ€§

**æµè§ˆå™¨è¦æ±‚**ï¼š

- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

**CSS ç‰¹æ€§**ï¼š

- `accent-color`ï¼ˆCheckbox é¢œè‰²ï¼‰
- CSS Grid
- Flexbox

### 3. æ€§èƒ½è€ƒè™‘

**æ³¨é‡Šè¿‡æ»¤æ€§èƒ½**ï¼š

- æ¯ä¸ªæ–‡ä»¶å¢åŠ çº¦ 2-5ms å¤„ç†æ—¶é—´
- å¤§å‹é¡¹ç›®ï¼ˆ1000+ æ–‡ä»¶ï¼‰å¢åŠ çº¦ 2-5s æ€»æ—¶é—´
- å¯æ¥å—çš„å¼€é”€

**UI æ¸²æŸ“æ€§èƒ½**ï¼š

- ç§»é™¤æ¸å˜å’Œé˜´å½±ï¼Œæå‡æ¸²æŸ“æ€§èƒ½
- å‡å°‘ CSS é‡æ’å’Œé‡ç»˜
- æ›´æµç•…çš„äº¤äº’ä½“éªŒ

---

## ğŸ‰ æ€»ç»“

### æ ¸å¿ƒæ”¹è¿›

âœ… **æ›´ç²¾å‡†çš„æ‰«æ** - æ³¨é‡Šä¸­çš„ä»£ç ä¸å†è¢«è¯¯åˆ¤  
âœ… **æ›´ç»Ÿä¸€çš„è§†è§‰** - Cursor Directory é£æ ¼ï¼Œç®€æ´ä¸“ä¸š  
âœ… **æ›´èšç„¦çš„åŠŸèƒ½** - ç§»é™¤ä¸éœ€è¦çš„ç»Ÿè®¡é¢æ¿

### ç”¨æˆ·ä»·å€¼

ğŸ¯ **å‡†ç¡®æ€§æå‡** - æ¸…ç†å·¥å…·æ›´å¯é ï¼Œä¸ä¼šè¯¯åˆ æ­£åœ¨ä½¿ç”¨çš„ key  
ğŸ¨ **ä½“éªŒæå‡** - æ·±è‰²ä¸»é¢˜æ›´æŠ¤çœ¼ï¼ŒUI æ›´ç®€æ´  
âš¡ **æ•ˆç‡æå‡** - ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼Œå‡å°‘å¹²æ‰°

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [i18n å·¥å…·ä½¿ç”¨æŒ‡å—](./i18n-tools.md)
- [Bug ä¿®å¤ï¼šCSV åˆ—ååŒ¹é…](./BUGFIX_CSV_COLUMN_MAPPING.md)

---

**æ›´æ–°å®Œæˆï¼å»ºè®®æ‰§è¡Œæµ‹è¯•éªŒè¯æµç¨‹ã€‚** ğŸš€

## ğŸš€ ç«‹å³ä½¿ç”¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd packages/template
npm run dev

# è®¿é—®å·¥å…·é¢æ¿ï¼ˆæ–° UIï¼‰
http://localhost:5173/__i18n

# æµ‹è¯•æ¸…ç†åŠŸèƒ½ï¼ˆä¿®å¤åï¼‰
npm run lang:clean --dry-run
```
